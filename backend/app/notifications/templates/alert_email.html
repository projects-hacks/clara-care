{% extends "_base.html" %}

{% block title %}ClaraCare â€” {{ alert_type_friendly }}{% endblock %}

{% block styles %}
.header {
    background-color: {{ severity_color }};
    color: white;
    padding: 28px 24px;
    text-align: center;
}
.header h1 {
    margin: 0;
    font-size: 22px;
    font-weight: 600;
    line-height: 1.3;
}
.severity-pill {
    display: inline-block;
    background-color: rgba(255,255,255,0.2);
    padding: 4px 14px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 700;
    margin-top: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.alert-description {
    font-size: 16px;
    color: #444;
    line-height: 1.8;
    margin-bottom: 24px;
}
.action-box {
    background-color: #f0f7ff;
    border-left: 4px solid #4a90d9;
    padding: 18px 20px;
    margin: 24px 0;
    border-radius: 0 8px 8px 0;
}
.action-box h3 {
    margin: 0 0 8px 0;
    font-size: 14px;
    font-weight: 700;
    color: #2c5282;
}
.action-box p {
    margin: 0;
    font-size: 15px;
    color: #2d3748;
    line-height: 1.7;
}
.context-note {
    font-size: 13px;
    color: #999;
    margin-top: 20px;
    line-height: 1.5;
}
.cta-button {
    background-color: {{ severity_color }} !important;
}
{% endblock %}

{% block content %}
<div class="header">
    <div style="font-size: 28px; margin-bottom: 8px;">{{ alert_icon }}</div>
    <h1>{{ alert_type_friendly }}</h1>
    <div class="severity-pill">{{ alert.severity }} priority</div>
</div>

<div class="content">
    {% if recipient_name %}
    <div class="greeting">Hi {{ recipient_name }},</div>
    {% endif %}

    <div class="alert-description">
        {{ alert.description }}
    </div>

    {% if alert.suggested_action %}
    <div class="action-box">
        <h3>ðŸ’¡ What you can do</h3>
        <p>{{ alert.suggested_action }}</p>
    </div>
    {% endif %}

    <div class="context-note">
        This was noticed on {{ timestamp_formatted }}.
        {% if alert.related_metrics and alert.related_metrics.consecutive_count %}
        This pattern has appeared {{ alert.related_metrics.consecutive_count }} time{{ 's' if alert.related_metrics.consecutive_count != 1 else '' }} in a row.
        {% endif %}
    </div>
</div>
{% endblock %}

{% block footer_message %}
<p>This alert was generated for {{ patient_name }}.</p>
<p style="font-size: 12px; margin-top: 8px;">ClaraCare monitors conversations and flags patterns that may be worth your attention.</p>
{% endblock %}
